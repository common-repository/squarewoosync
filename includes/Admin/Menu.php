<?php

namespace Pixeldev\SquareWooSync\Admin;

if (!defined('ABSPATH')) {
    exit; // Exit if accessed directly
}

/**
 * Admin Menu class.
 *
 * Responsible for managing admin menus.
 */
class Menu
{

    /**
     * Constructor.
     *
     * @since 0.2.0
     */
    public function __construct()
    {
        add_action('admin_menu', [$this, 'init_menu']);
    }

    /**
     * Init Menu.
     *
     * @since 0.2.0
     *
     * @return void
     */
    public function init_menu()
    {
        global $submenu;

        $slug          = SQUAREWOOSYNC_SLUG;
        $menu_position = 50;
        $capability    = 'manage_options';
        $logo_icon     = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJMYXllcl8yIiBkYXRhLW5hbWU9IkxheWVyIDIiIHZpZXdCb3g9IjAgMCA0NTcuMzMgNDU2LjQ2Ij4KICA8cGF0aCAgZmlsbD0iI2E3YWFhZCIgY2xhc3M9ImNscy0xIiBkPSJNMjUzLjE4LDIwNS42NmgtNTguOTR2NjIuNWg2NC40di02Mi41aC01LjQ2WiIvPgogIDxwYXRoIGZpbGw9IiNhN2FhYWQiIGNsYXNzPSJjbHMtMSIgZD0iTTQ1Ni4zNywxMTEuNDdjLS4xNi0xMi43OS0uMDItMjUuODgtMi42Ni0zOC4yNi00Ljc1LTIyLjI1LTE3Ljg4LTM5Ljg2LTM1LjcxLTUzLjc5LTE0LjA3LTEwLjk5LTI5LjY5LTE4LjI3LTQ4LjAxLTE4LjQ5QzM1MCwuNjksMzMwLjAyLS4wMiwzMTAuMDMsMGMtNzEuNjQuMDgtMTQzLjI4LjU4LTIxNC45Mi41MS0yNy4yNy0uMDMtNTAuMDEsOS43NC02OC42MSwyOS4yN0MxMC43Miw0Ni4zNC45Myw2NS42OC43MSw4OS4xMy41NiwxMDUuNDUuMDMsMTIxLjc4LjAxLDEzOC4xYy0uMDQsNDIuNDkuMDIsODQuOTguMTksMTI3LjQ2LjE0LDMxLjQ5LjMxLDYyLjk4LjksOTQuNDYuMjMsMTIuMjMtLjIsMjQuNTgsNS4wOSwzNi4zLDEzLjUxLDI5LjkyLDM2LjQyLDQ4Ljk1LDY3LjEsNTkuMjksMS4yMi40MSwyLjYuNSwzLjkxLjUsODcuOTguMTYsMTc1Ljk1LjM1LDI2My45My4zNSwxMi40NywwLDI1LjA5LjA1LDM3LjM5LTEuNzEsMjMuMi0zLjMyLDQxLjEtMTYuMzksNTUuOTYtMzMuOSwxMy40NC0xNS44NCwyMS40NC0zMy43NywyMS4zOC01NS4wMS0uMDUtMTcuMzIuNi0zNC42NC45Ni01Mi40NmguMDFjLjE5LTIxLjE1LjU2LTQxLjgxLjQ5LTYyLjQ2LS4xNy00Ni40OC0uNC05Mi45Ny0uOTUtMTM5LjQ1Wk0yNTQuMzMsODMuOTZjMy42NC4wOSw3LjMyLjI4LDEwLjkxLjg1LDE4LjIyLDIuODgsMjguOTMsMjQuODYsMjAuMjYsNDEuMzgtMy4xNSw2LjAxLTguNzMsOC43OS0xNS44LDcuOS01LjM1LS42OC04LjAzLTMuNzctOS42NC0xMS4wOS0yLjMyLTEwLjU3LTIuMzYtMTAuMzYtMTMuMTYtMTIuMTMtMi42Ni0uNDMtNS4wMi0yLjcyLTcuNzQtNC40N2gwYy01LjU5LTEzLjI2LDEtMjIuNzgsMTUuMTctMjIuNDRaTTE1NC4zNSw4NS4xM2MxLjEtLjM4LDIuMjYtLjgyLDMuMzktLjgxLDE1Ljk2LjIyLDMxLjk2LjA0LDQ3Ljg4Ljk5LDguNzQuNTIsMTIuMTYsNi4yMSwxMS4wMSwxNS4xMS0uNzQsNS43My0zLjc3LDkuNS05LjUyLDkuNzgtMTIuOTYuNjQtMjUuOTUuNjQtMzkuNDIuOTFoLjAxYy0zLjgzLS4wOC03LjE3LS4wNC0xMC40OS0uMjQtOC4wMy0uNS0xMi42NC00LjQ2LTEzLjQxLTExLjMzLS41Ny01LjA5LDQuNzktMTIuNDMsMTAuNTUtMTQuNDFaTTExNi4xNiwyOTUuODVjLTExLjU5LDQuNTctMjcuMTMsMS4xOC0zNi4xOS04LjEzaDBjLTYuOTctMTAuNy02LjY5LTIxLjk4LTMuNjEtMzMuMzEsMS4zNS00Ljk1LDkuMDUtOS4yNiwxMy40MS04LjU4LDYuMDEuOTQsMTEuMjIsNi40MywxMS43OSwxMi40Ny4zNCwzLjYxLS42NCw4LjM3LDEuMywxMC40OSwxLjc4LDEuOTUsNi42NywxLjA1LDEwLjE5LDEuNDUsNi42My43NywxMC44NCw0LjU5LDExLjU3LDEwLjQ0LjkyLDcuNDItMS45NywxMi42MS04LjQ2LDE1LjE3Wk03NS4wMSwxNjYuOTNjLjA3LTYuNjUsNS4zOS0xMC41NiwxMC43LTEzLjQzLDQuMS0yLjIxLDE0LjcyLDQuNTgsMTQuODIsOS41LjM2LDE3LjI4LjYzLDM0LjU2LjM0LDUxLjg0LS4xMyw3LjY5LTMuMzUsMTAuOTMtOS40OCwxMi4wOC01Ljk3LDEuMTItMTEuNy0xLjc3LTE0Ljk0LTcuNTQtLjI0LS40My0uNDItLjktLjcyLTEuNzVoMGMtLjM1LTE3LjE3LS44OS0zMy45NC0uNzItNTAuN1pNMTI0LjkyLDk4Ljg1Yy0uNDIsNi4yMy01LjU4LDExLjIzLTEyLjU2LDEyLjE2LTYuNDUuODUtMTAuMDQsNC40My0xMC43OCwxMC43NC0uOTMsNy45OC01Ljc0LDEyLjQtMTMuNTMsMTIuNDYtNy44NS4wNi0xMi42NS0zLjc2LTEzLjA4LTExLjkzLS4zNi02LjczLS4xLTEzLjczLDEuMzgtMjAuMjgsMi41Ni0xMS4zNCwxMS4xOS0xNy43OCwyMi43Ny0xNy44Niw1LjEyLS4wMywxMC4yNC45MiwxNS43NSwxLjU1LDcuMywyLjI1LDEwLjQ5LDYuNTYsMTAuMDUsMTMuMTZaTTIxNi43NSwzNzYuMDdjLS43Nyw4LjY1LTMuNzgsMTIuNDMtMTEuODcsMTMuMTEtNi41Ni41NS0xMy4zNi41MS0xOS44MS0uNjMtNy44OC0xLjM5LTE0LTcuMDUtMTUuODgtMTQuMzUtMi4wMS03LjgxLTIuMDUtMTYuNDQtMS4zLTI0LjU1LjY4LTcuMzYsNS45Ny0xMC4yOCwxMy43MS05Ljc2LDYuOS40NiwxMS4zLDQuNjUsMTIuMTUsMTEuNTcuODUsNi45Myw0LjczLDEwLjgsMTEuNjMsMTEuNjEsNy4zMy44NSwxMC44Nyw0Ljc2LDExLjM4LDEzLjAxaC0uMDFaTTMwOS44MSwzNzcuODRjLS4zOCw1Ljc1LTMuMjMsOS40NS04Ljk5LDEwLjI1LTYuOS45NS0xMy44OSwxLjItMjEuMzMsMS43NWgwYy05LjEzLjEtMTcuNzcuMTUtMjYuNDIuMy01LjU3LjEtOS43NS0yLjI3LTEzLjQ1LTYuMzYtMy44NS00LjI2LTMuMjgtOC42LTEuNzUtMTMuNDUsMS40OS00LjcsNC42LTYuNTcsOS4yOS02LjU5LDE2Ljc4LS4xLDMzLjU3LS42MSw1MC4zNC0uMjMsOC40LjE5LDEyLjg1LDYuMTcsMTIuMzEsMTQuMzNaTTMwMi4zNCwyMDIuMDFjLTQuMDcsMi4wOS04LjcxLDMuMDYtMTMuNDUsNC42NC0uNDIsMTcuMzgtLjcxLDM1LjE3LTEuMzQsNTIuOTQtLjI0LDYuNjMtLjkyLDEzLjMtMi4wMSwxOS44NC0xLjU4LDkuNDItNy40MiwxNS4yNi0xNi44OCwxNi41Mi04LjM5LDEuMTItMTYuODksMS43NC0yNS4zNSwxLjg5LTE2LjI5LjI5LTMyLjU5LjA4LTQ5LjQxLjA4LDAsMi43Ny4wMyw1LjIxLDAsNy42Ni0uMTEsOC44My0zLjY4LDEzLjMtMTEuMDIsMTMuODUtOC4wNC42MS0xNS42NC00LjY5LTE1Ljg2LTEyLjQ4LS4xOS02LjktMy40LTkuMTEtOS4zNS0xMC4zOS04LjktMS45My0xMy45Mi03LjE3LTEzLjkzLTEzLjQzLDAtNi4zMiw1LjAyLTExLjE4LDEzLjkxLTEzLjQ0LDIuNzQtLjcsNS40OC0xLjM1LDkuMjItMi4yNywwLTkuNDItLjA5LTE5LjAyLjAyLTI4LjYyLjE4LTE0LjgxLjQxLTI5LjYzLjg3LTQ0LjQ0LjA2LTIuMDQsMS4yMy00LjI5LDIuNDYtNi4wMiw2LjU5LTkuMjYsMTUuMzktMTIuMTQsMjYuODktMTEuNjksMTguNzcuNzQsMzcuNjEtLjUxLDU2LjQyLS43MywzLjM2LS4wNCw1LjMtLjgsNS42Mi00LjQ1LjE3LTEuOTYuOTYtMy44NywxLjM5LTUuODIsMS4yMS01LjQzLDQuMDgtOS4zOSw5Ljk4LTExLjIzaDBjOS43NC0xLjE3LDE1LjAyLDIuNCwxNi42MSwxMi40NCwxLjA5LDYuODYsNC4zMSw5LjY0LDEwLjkyLDEwLjQyLDcuMDQuODMsMTAuOTEsNC41MywxMS43NSw5Ljc0LDEuMDEsNi4yNC0xLjQyLDExLjg4LTcuNDYsMTQuOTlaTTMyOS40OCwxODkuNGMuMzUtNi44MSw0LjQ3LTExLjU1LDEyLjAzLTEyLjI3LDUuODctLjU2LDEyLjAzLS42NCwxNy43OC40OCwxMy4yLDIuNTgsMjAuNDgsMTIuMjQsMjAuOTUsMjYuNTMuMDksMi44MS0uMjgsNS42NC0uNDksOC44OGgwYy0xLjkzLDEwLjkyLTUuNTYsMTQuMzktMTQuMzUsMTQuMS02LjU2LS4yMi0xMS41OC0zLjg1LTEyLjY5LTExLjEyLTEuMTctNy42NC00LjczLTExLjA4LTEyLjMyLTEyLjI4LTcuNzEtMS4yMS0xMS4zLTYuNzYtMTAuOTEtMTQuMzJaTTM3OS42MSwyOTMuMDZoMHMwLDAsMCwwYy0uNiw2Ljc2LS45MywxMy4wNy0xLjg4LDE5LjI5LS42OCw0LjQ3LTMuODIsNi42MS04LjQyLDcuMDEtMTEuNTUuOTktMTUuNTktMS4zNi0xNi4wNy0xMi43NC0uNjktMTYuNDEtLjMyLTMyLjkuMzItNDkuMzIuMjgtNy4wMyw1LjY2LTExLjE5LDExLjc4LTExLjA2LDcuMjguMTYsMTMuMDUsNC44NCwxMy40MywxMS45My42MSwxMS40NS41OSwyMi45My44NCwzNC44OWgwWk0zODAuNDIsMzYwLjE0Yy0xLjEzLDUuNTgtMS41MywxMS4wMi0zLjU1LDE1Ljc4LTMuODYsOS4xLTExLjAzLDEzLjg4LTIxLjI5LDEzLjI0LTUuMy0uMzMtMTAuNjctLjE2LTE1Ljg5LS45OC03LjU4LTEuMTktMTAuMzQtNS4yOS0xMC4wNC0xMy40OS4yMy02LjUzLDQuMDMtMTAuNiwxMC43OC0xMS41OCw2LjM4LS45MywxMC4zMS00LjU3LDExLjc4LTEwLjk0LDIuMDgtOC45Nyw1LjM5LTEyLjA4LDEzLjEtMTIuMzIsOC4xNS0uMjUsMTIuNDcsMi45OSwxNC4xMiwxMC45My42MSwyLjkxLjY3LDUuOTQuOTksOS4zNmgwWiIvPgo8L3N2Zz4=';

        add_menu_page(esc_attr__('SquareSync', 'squarewoosync'), esc_attr__('SquareSync', 'squarewoosync'), $capability, $slug, [$this, 'plugin_page'], $logo_icon, $menu_position);

        if (current_user_can($capability)) {
            $submenu[$slug][] = [esc_html__('Dashboard', 'squarewoosync'), $capability, 'admin.php?page=' . $slug . '#/'];
            $submenu[$slug][] = [esc_html__('Products', 'squarewoosync'), $capability, 'admin.php?page=' . $slug . '#/inventory'];
            $submenu[$slug][] = [esc_html__('Customers', 'squarewoosync'), $capability, 'admin.php?page=' . $slug . '#/customers'];
            $submenu[$slug][] = [esc_html__('Orders', 'squarewoosync'), $capability, 'admin.php?page=' . $slug . '#/orders'];
            $submenu[$slug][] = [esc_html__('Settings', 'squarewoosync'), $capability, 'admin.php?page=' . $slug . '#/settings/general'];
            $submenu[$slug][] = [esc_html__('GO PRO', 'squarewoosync'), $capability, 'https://squaresyncforwoo.com/'];
        }
    }

    /**
     * Render the plugin page.
     *
     * @since 0.2.0
     *
     * @return void
     */
    public function plugin_page()
    {
        require_once SQUAREWOOSYNC_TEMPLATE_PATH . '/app.php';
    }
}
